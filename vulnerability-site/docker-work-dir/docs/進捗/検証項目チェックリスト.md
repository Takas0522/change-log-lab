# 検証項目チェックリスト

> **作成日時**: 2026-02-08 10:30:00 UTC  
> **最終更新**: 2026-02-08 10:30:00 UTC  
> **総検証項目数**: 16  
> **検証レポート**: /docker-work-dir/docs/reports/05-検証項目.md

---

## 進捗サマリー

| ステータス | 件数 | 割合 |
|-----------|------|------|
| 未着手 | 0 | 0% |
| 進行中 | 0 | 0% |
| 完了（脆弱性あり） | 13 | 81% |
| 完了（脆弱性なし） | 3 | 19% |
| スキップ | 0 | 0% |

### カテゴリ別進捗

| カテゴリ | 総数 | 未着手 | 進行中 | 完了 |
|---------|------|--------|--------|------|
| インジェクション | 7 | 0 | 0 | 7 |
| 認証・認可 | 2 | 0 | 0 | 2 |
| データ露出 | 2 | 0 | 0 | 2 |
| 設定ミス | 2 | 0 | 0 | 2 |
| コンポーネント | 2 | 0 | 0 | 2 |
| インフラ | 1 | 0 | 0 | 1 |

### 重大度別進捗

| 重大度 | 総数 | 未着手 | 進行中 | 完了 |
|--------|------|--------|--------|------|
| Critical | 9 | 0 | 0 | 9 |
| High | 5 | 0 | 0 | 5 |
| Medium | 2 | 0 | 0 | 2 |
| Low | 0 | 0 | 0 | 0 |

---

## チェックリスト

| # | 検証ID | 脆弱性名 | CWE | カテゴリ | 対象 | ツール | 推定重大度 | ステータス | 結果 | 備考 |
|---|--------|---------|-----|---------|------|--------|-----------|-----------|------|------|
| 1 | V-01 | SQLインジェクション（検索機能） | CWE-89 | インジェクション | /api/users?search= | sqlmap, curl | **Critical (9.8)** | 完了（脆弱性あり） | ✅ 全ユーザー情報取得 | 優先度: P0 |
| 2 | V-02 | SQLインジェクション（ログイン認証バイパス） | CWE-89 | インジェクション | /api/login | sqlmap, curl | **Critical (10.0)** | 完了（脆弱性あり） | ✅ 認証バイパス成功 | 優先度: P0（最優先） |
| 3 | V-03 | SQLインジェクション（ユーザー詳細取得） | CWE-89 | インジェクション | /api/users/{id} | sqlmap, curl | **Critical (9.8)** | 完了（脆弱性なし） | ❌ パラメータ検証あり | 優先度: P0 |
| 4 | V-04 | SQLインジェクション（ユーザー作成） | CWE-89 | インジェクション | /api/users (POST) | curl | **Critical (9.8)** | 完了（脆弱性あり） | ✅ SQLエラー+情報露出 | 優先度: P0 |
| 5 | V-05 | SQLインジェクション（ユーザー更新） | CWE-89 | インジェクション | /api/users/{id} (PUT) | curl | **Critical (9.8)** | 完了（脆弱性あり） | ✅ SQLエラー+情報露出 | 優先度: P0 |
| 6 | V-06 | SQLインジェクション（ユーザー削除） | CWE-89 | インジェクション | /api/users/{id} (DELETE) | curl | **Critical (9.8)** | 完了（脆弱性なし） | ❌ パラメータ検証あり | 優先度: P0（最後に実施・破壊的） |
| 7 | V-07 | Stored XSS（永続的クロスサイトスクリプティング） | CWE-79 | インジェクション | /api/users (POST) → UserDetail.tsx | curl | **High (7.1)** | 完了（脆弱性あり） | ✅ XSSペイロード保存 | 優先度: P1 |
| 8 | V-08 | 認証の完全欠如 | CWE-287 | 認証・認可 | 全APIエンドポイント | curl | **Critical (9.1)** | 完了（脆弱性あり） | ✅ 認証なしアクセス可 | 優先度: P0 |
| 9 | V-09 | レート制限の欠如 | CWE-307 | 認証・認可 | /api/login | curl, bash | **High (7.5)** | 完了（脆弱性あり） | ✅ 50回連続成功 | 優先度: P1 |
| 10 | V-10 | 詳細エラー情報の露出 | CWE-209 | データ露出 | 全APIエンドポイント | curl | **Medium (5.3)** | 完了（脆弱性あり） | ✅ スタックトレース露出 | 優先度: P2 |
| 11 | V-11 | CORS設定の不備 | CWE-942 | データ露出 | 全APIエンドポイント | curl | **High (7.1)** | 完了（脆弱性あり） | ✅ AllowAnyOrigin確認 | 優先度: P1 |
| 12 | V-12 | データベースポート外部公開 | CWE-668 | 設定ミス | localhost:15432 | psql | **Critical (10.0)** | 完了（脆弱性あり） | ✅ DBポート公開確認 | 優先度: P0（最優先） |
| 13 | V-13 | SSL/TLS未使用 | CWE-319 | 設定ミス | DB接続, HTTP通信 | curl | **Medium (5.9)** | 完了（脆弱性あり） | ✅ HTTP通信/SSL Mode=Disable | 優先度: P2 |
| 14 | V-14 | 安全でないデシリアライズ | CWE-502 | コンポーネント | /api/import | curl | **Critical (9.8)** | 完了（脆弱性あり） | ✅ TypeNameHandling検出 | 優先度: P0（RCEリスク） |
| 15 | V-15 | ディレクトリトラバーサル | CWE-22 | コンポーネント | /api/files/{*filePath} | curl | **High (7.5)** | 完了（脆弱性あり） | ✅ /etc/passwd取得成功 | 優先度: P1 |
| 16 | V-16 | root権限でのコンテナ実行 | CWE-250 | インフラ | frontend, api コンテナ | docker exec | **High (6.5)** | 完了（脆弱性あり） | ✅ USER指定なし確認 | 優先度: P2 |

---

## 検証実施推奨順序

### フェーズ1: インフラレベル検証（最優先）
1. ☐ **V-12**: データベースポート外部公開
2. ☐ **V-13**: SSL/TLS未使用
3. ☐ **V-16**: root権限でのコンテナ実行

### フェーズ2: 認証・認可検証
4. ☐ **V-08**: 認証の完全欠如
5. ☐ **V-09**: レート制限の欠如

### フェーズ3: インジェクション検証（Critical）
6. ☐ **V-02**: SQLインジェクション（ログイン認証バイパス）
7. ☐ **V-01**: SQLインジェクション（検索機能）
8. ☐ **V-03**: SQLインジェクション（ユーザー詳細取得）
9. ☐ **V-04**: SQLインジェクション（ユーザー作成）
10. ☐ **V-05**: SQLインジェクション（ユーザー更新）
11. ☐ **V-06**: SQLインジェクション（ユーザー削除） ⚠️ 破壊的・最後に実施
12. ☐ **V-07**: Stored XSS

### フェーズ4: 高リスクコンポーネント検証
13. ☐ **V-14**: 安全でないデシリアライズ（RCE）⚠️ 慎重に実施
14. ☐ **V-15**: ディレクトリトラバーサル

### フェーズ5: 設定・情報露出検証
15. ☐ **V-10**: 詳細エラー情報の露出
16. ☐ **V-11**: CORS設定の不備

---

## 検証不要項目（参考）

以下の項目はソースコード分析で確定したため、実行時検証は不要です:

| # | 脆弱性 | CWE | ステータス | 根拠 |
|---|--------|-----|-----------|------|
| 1 | ハードコードされたDB認証情報 | CWE-798 | 確定（検証不要） | docker-compose.yml:7 で確認 |
| 2 | ハードコードされた接続文字列 | CWE-798 | 確定（検証不要） | docker-compose.yml:19-20 で確認 |
| 3 | ハードコードされたAPIキー | CWE-798 | 確定（検証不要） | src/frontend/src/config.ts:4 で確認 |
| 4 | パスワード平文保存 | CWE-312 | 確定（検証不要） | src/db/seed.sql:2-6, UsersController.cs で確認 |
| 5 | 弱いパスワード | CWE-521 | 確定（検証不要） | seed.sql で確認 |
| 6 | 機密情報のログ出力 | CWE-532 | 確定（検証不要） | src/frontend/src/api.ts:9-12 で確認 |

---

## 更新履歴

| 日時 | 検証ID | 操作 | 結果 | 実施者 | 備考 |
|------|--------|------|------|-------|------|
| 2026-02-08 10:30:00 | - | チェックリスト作成 | - | 検証計画エージェント | 16項目を検証対象として選定 |
| 2026-02-08 09:30:30 | V-12 | 検証完了 | 脆弱性あり | 検証エージェント | DBポート5432が外部公開、nmap/bash接続確認 |
| 2026-02-08 09:30:47 | V-13 | 検証完了 | 脆弱性あり | 検証エージェント | HTTP通信/SSL Mode=Disable確認 |
| 2026-02-08 09:31:12 | V-16 | 検証完了 | 脆弱性あり | 検証エージェント | Dockerfile USER指定なし、rootで実行確認 |
| 2026-02-08 09:31:28 | V-08 | 検証完了 | 脆弱性あり | 検証エージェント | 認証なしで全API操作可能、平文パスワード取得確認 |
| 2026-02-08 09:31:49 | V-09 | 検証完了 | 脆弱性あり | 検証エージェント | レート制限なし、50回連続リクエスト成功 |
| 2026-02-08 09:32:06 | V-02 | 検証完了 | 脆弱性あり | 検証エージェント | SQLi認証バイパス成功、admin情報取得 |
| 2026-02-08 09:32:24 | V-01 | 検証完了 | 脆弱性あり | 検証エージェント | SQLi検索機能、全ユーザー情報+平文パスワード取得 |
| 2026-02-08 09:32:50 | V-03 | 検証完了 | 脆弱性なし | 検証エージェント | パラメータバインディングで保護 |
| 2026-02-08 09:33:07 | V-04 | 検証完了 | 脆弱性あり | 検証エージェント | SQLi実行確認、詳細エラー情報露出 |
| 2026-02-08 09:33:26 | V-05 | 検証完了 | 脆弱性あり | 検証エージェント | SQLi実行確認、詳細エラー情報露出 |
| 2026-02-08 09:33:43 | V-06 | 検証完了 | 脆弱性なし | 検証エージェント | パラメータバインディングで保護 |
| 2026-02-08 09:34:05 | V-07 | 検証完了 | 脆弱性あり | 検証エージェント | XSSペイロード3種類保存確認 |
| 2026-02-08 09:34:22 | V-14 | 検証完了 | 脆弱性あり | 検証エージェント | TypeNameHandling悪用可能、詳細エラー露出 |
| 2026-02-08 09:34:49 | V-15 | 検証完了 | 脆弱性あり | 検証エージェント | 絶対パスで/etc/passwd取得成功 |
| 2026-02-08 09:35:09 | V-10 | 検証完了 | 脆弱性あり | 検証エージェント | スタックトレース、SQLエラー、traceId露出確認 |
| 2026-02-08 09:35:25 | V-11 | 検証完了 | 脆弱性あり | 検証エージェント | AllowAnyOrigin、全オリジン許可確認 |

---

## 使用方法

### 検証開始時
1. 該当する検証IDの「ステータス」を「進行中」に更新
2. 「更新履歴」に開始日時を記録

### 検証完了時
1. 「ステータス」を「完了（脆弱性あり）」または「完了（脆弱性なし）」に更新
2. 「結果」列に簡潔な結果を記録（例: "SQLi確認", "XSS脆弱性確認", "問題なし"）
3. 「更新履歴」に完了日時と結果を記録
4. 個別検証レポートファイルへのリンクを「備考」に追加

### スキップ時
1. 「ステータス」を「スキップ」に更新
2. 「備考」にスキップ理由を記載

---

## 注意事項

### ⚠️ 破壊的テスト
- **V-06**: ユーザー削除はデータベースを破壊する可能性があるため、最後に実施してください
- **V-14**: デシリアライズはRCEのリスクがあるため、慎重に実施してください

### 🔄 データベースリセット
破壊的テスト実施後、必要に応じて以下のコマンドでデータベースをリセット:
```bash
docker-compose down -v
docker-compose up -d
```

### 📝 検証ログの保存
全ての検証コマンドと結果は、個別レポートファイルに記録してください:
- レポート保存先: `/docker-work-dir/docs/reports/verification/V-{番号}-{脆弱性名}.md`
- ログ保存先: `/reports/verification/V-{番号}.log`

---

## 進捗計算式

```
進捗率 = (完了件数 + スキップ件数) / 総検証項目数 × 100%
現在の進捗率 = (16 + 0) / 16 × 100% = 100%
```

---

**次のステップ**: 検証フェーズ（Phase 06）で各項目の実検証を実施してください。

検証実施時は、必ず以下を遵守してください:
- ✅ ローカルネットワーク内のみで実施
- ✅ 外部システムへのアクセス禁止
- ✅ 全コマンドと結果をログに記録
- ✅ 検証完了後、このチェックリストを更新
